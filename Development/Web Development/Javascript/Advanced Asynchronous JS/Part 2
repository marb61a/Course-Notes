                    Advanced Asynchronous JavaScript
                    Course Notes Part 2


2 - Q&A: Hot Observables
Q & A from the students
Example Syntax
  // The question is would it make sense to have the setTimeout() as a hot observable
  // It can be done but probably would not make sense to do so
  // This is because it would case a race condition, below is not a true hot observable as values are remembered
  class Observable{
    constructor(subscribe){
      this._subscribe = subscribe;
    }
    subscribe(observer){
      return this._subscribe(observer);
    }
    
    static timeout(time){
      let fired = false;
      let obs = null;
      
      const handle = setTimeout(function(){
        // If the fired is changed to if(!obs) return this will cause a race condition but will be a true hot observable
        fired = true;
        obs.next();
        obs.complete();
      }, time);
      
      return new Observable(function(subscribe(observer){
        if(fired === true){
          observer.next();
          observer.complete();
        } else {
          obs = observer
        }
        return{
          unsubscribe(){
            clearTimeout(handle);
          }
        }
      })
      )
    }
  }

3 - Data Stream into Hot Observable
Continuing with the example from previous sections
  - This may not be good for realtime data  
Example Syntax
  class Observable{
    constructor(subscribe){
      this._subscribe = subscribe;
    }
    
    subscribe(observer){
      return this._subscribe(observer);
    }
    
    static timeout(time){
      return new Observable(function(subscribe){
        const handle = setTimeout(function(){
          observer.next();
          observer.complete();
        }, time);
        
        return{
          unsubscribe(){
            clearTimeOut(handle);
          }
        }
      });
    }
    
    // One of the ways to create a hot data source is to adapt a hot data source
    // An event stream is an example of a hot data source, this is a very important part
    // of RX programming. This takes DOM events and turns them into Observables
    static fromEvent(dom, eventName){
      return new Observable(function(){
      
      })
    }
    
    // Example observable for natural numbers
    // The consumer could subsequently only need 10 which gives rise to the notion of being lazy
    // this means that things are not done until they need to be
    static allNumbers(){
      return new Observable(function subscribe(observer){
        for(let num = 0; true; num++){
          observer.next(num);
        }
      })
    }
  }
