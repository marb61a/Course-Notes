                    AZ900 Microsoft Azure Cloud Fundamentals 2021
                    Course Notes Part 26


Windows Azure Virtual Machine Deployment
  - There are a few ways that you can end up having a virtual machine running in the Azure Cloud
    - One way would be to migrate an on-premises server into the cloud.
    - Or you might use a managed service in Azure
    - In other words, you might configure a service offering that takes care of setting up the virtual machines for you
    - Of course, you could then manually deploy virtual machines, in this case using the Azure portal
    - One way to do that here in the Azure portal is to click Virtual machines when you're looking at the Azure home page.
  - That puts you in the Virtual machines view where you could click Add to add a virtual machine.
    - But there are other ways, we could also click Create a resource over on the left
    - Under the Compute section, we can see some featured virtual machine images like Windows Server 2016 Datacenter
    - We can also click See all, where we can even filter this list of virtual machine images
    - Operating System for example uncheck Select all and if only interested in Windows Server 2016
    - Turn that on and the list gets filtered to show only that
    - Notice that we are getting not only Windows Server 2016 but also apps installed within it like SQL server.
  - BYOL, as seen here, stands for Bring Your Own License
    - It would let you reuse any SQL Server 2016 Enterprise licenses you might already have here in the cloud
    - Another option for deploying a virtual machine here in the portal would be to click Create a resource
    - Search for template, I could choose Template deployment, then click Create
    - We're talking about ARM templates here, Azure Resource Manager, we could build our own template
    - And manually specify that we want to create one or more virtual machines. We could even import any existing template files, you might have to do that.
    - There's also templates here to create a Linux virtual machine, Windows.
    - We can ever refer to some templates available on the GitHub community that deal with the creation of the virtual machines.
  - So there are a lot of ways to do it and this is just in the portal
    - Go ahead and close out of this and go back to the Virtual machines view on the left and click the Add button here
    - The first thing we have to do is tie this to a subscription and then deploy it into a resource group
    - Deploy this into an existing resource group called Rg1, then the virtual machine name
    - It's very important that we're aware of what types of characters are allowed.
  - There are a bunch of capital letters and weird symbols of my virtual machine name
    - It tells me that the virtual machine name can't contain non-ASCII or special characters
    - Like all Azure resource deployments, we have to have first considered a naming standard
    - Again call this anythine but ensure that it fits the standars
    - Then it must be deployedin a specific Azure region
    - Don't configure any availability options we are interested in the image
    - It's got Ubuntu server, well, that's Linux
    - Open this drop down list, I can see I can choose from other items including Windows Server 2016 Datacenter
    - You will always have to consider what kind of workload will run
    - Because that's going to determine which operating system you need to support that workload
  - Choose Windows Server 2016 Datacenter, at the same time there is a link to browse all images and disks if I want to see more
    - The sizing here determines how much horsepower is available, we've got one virtual CPU and 3.5 gigabytes of memory.
  - If we consider the workload that this virtual machine will be supporting, we'll be able to determine if that makes sense or not
    - If it doesn't, I can click Change size, the more vCPUs and RAM and the faster disk speed for Max IOPs that you select, the more costs incurred
    - We can see that over here in the cost per month estimation over on the right hand column.
    - However, if happy with the default sizing that was selected then leave it.
The next thing is credentials for our new virtual machine. So I'm going to fill in a username and a password and I'll confirm that same password.
  - Bear in mind, you won't be able to use things like Administrator because that's considered a reserved word
    - Just use an example user here, cirving where we have specified and confirmed a password
    - We can at this point in time determine what type of inbound network traffic I want to allow
    - Leave the default selections and down below it says, do you already have a Windows license?
  - We do not, so I'm going to leave it on the default of No
    - We don't have a license that we can reuse so click Next to go to the disks configuration
    - Here we can determine if we want to use Premium SSDs for the utmost in performance, or Standard magnetic hard disk drives, HDD's
    - That would incur less cost, but of course, that comes with less performance
    - Leave it on Premium SSD. I can also attach data disks, whether they already exist or they want to Create a new one
    - Because what we're going to be creating here is essentially the operating system disk for the virtual machine
    - There is no need for an additional data disk so click Next to move on to the Networking section
    - You need to deploy the virtual machine into an Azure Virtual Network, a VNet for which we can create a new VNet
    - Or I can choose from the drop down list if I've already created any
    - And I have, I've got one called Eastvnet that I've deployed into a resource group called Rg1 which we also see listed here
  - A VNet is organized into one or more subnets
    - Choose the appropriate subnet within that VNET that I actually want to deploy the virtual machine in
    - Always take note of the IP addressing because that reflects what addressing will be used, at least within that subnet for your Azure virtual machine.
    - I can determine whether I want a public IP address available here.
    - It's going to make a new one automatically that uses a name of the virtual machine with -ip at the end of it
    - The public IP is wanted because I want to be able to connect to this virtual machine from outside of Azure from across the Internet.
  - We're not going to worry about changing any of the security settings or inbound ports because we'll be focusing on that in another demonstration
    - Leave all the default selections for those and then click Next.
  - Boot diagnostics, which is used to capture things like boot up screens, is on by default and we've got a diagnostic storage account where that will be stored
    - Turn on operating system guest diagnostics if I want metrics about the performance of that virtual machine gathered periodically.
  - We can also assign a system assigned managed identity
    - You would use that if, for example, you had an app within this virtual machine that needed to talk to an Azure Key Vault to get credentials of some kind
    - We can also enable auto shutdown so that if we forget to turn off virtual machines at the end of the day
    - They will turn off based on our configuration so we don't keep incurring costs.
    - We can determine whether we want to enable backup so leave all of these default selections as they are
    - Click Next where we can also add extensions within the virtual machine.
  - If I choose Select an extension to install, we've got essentially agents that run within the virtual machine operating system for things like backup
    - Or for additional cloud security or script extensions if we want to run custom scripts, PowerShell Desired State
    - To maintain a baseline configuration, and so on, there is no need so click Next for tagging.
    - Assign this to the ProjectA project,
    - There is already that tag and value, otherwise I could add new ones and then click Review and create.
  - At this point, it's going to run a little validation based on my selections and it now says validation passed and this is very important.
  - We can see here what the US dollar cost per hour is approximated at here, so this is going to be important for determining the pricing for this
    - All of these settings are okay so click Create to build our Windows virtual machine
    - That pops us into this Your deployment is underway screen
    - Click on All resources on the left to see what's happening
    - Because a virtual machine really consists of a number of moving parts like an IP address, a network security group, a network interface
    - Notice that you could end up with more than just the virtual machine resource listed here when you're looking at the All resources view
    - Refresh the All resources view and we should be seeing more and more
    - We should be seeing the operating system disk for that virtual machine
    - And we can also see the virtual machine itself
    - As is the case with all Azure resources, if I were to click on the link for the name of that virtual machine
    - It opens up the properties blade where I could see all the items that I could configure about this virtual machine.

