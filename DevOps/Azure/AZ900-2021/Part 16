                    AZ900 Microsoft Azure Cloud Fundamentals 2021
                    Course Notes Part 16


Azure Virtual Networks (Cont)
  - Azure Virtual Networks or VNets are network definitions that we create within the Azure cloud
    - We would do this for the same reasons that we would define a new network physically on-premises
    - Because we want to have a separate isolated part of the network where we deploy certain services, whether it's file servers or DNS servers or client stations
  - We would do it for the same types of reasons in the cloud, and this falls under the category of software defined networking or SDN
    - Where the actual underlying technical complexities in making this happen at the data center level are hidden from us. 
      - Instead, we have easy-to-use command line tools or graphical interfaces such as through the Azure portal, through which we can configure these things.
  - The management is varied, using the GUI or command line tools. When you deploy an Azure virtual network, there are some things to consider
    - One of which is the location or the Azure region where you are creating it
    - That could have an impact because you want to try to place that closest to where the use of resources that you deploy into that VNet will be accessed from
  - For instance, if you know that you're going to have some virtual machines accessed by client devices in the American western seaboard area
    - Then you should probably create the VNet that will host those resources in the West US region
    - We then have to plan out our IPv4 CIDR notation. We've got to think about the IP address range or ranges that we want to use within our virtual network.
  - Bear in mind, a virtual network contains subnets as we see here listed in the bottom left
    - Each subnet takes an IP address range that is derived from the parent IP address range assigned to the virtual network
    - There's a hierarchy where subnets fall under virtual networks
    - We also have to think about whether we're going to be deploying firewall and/or DDoS protection in that VNet or any of its subnets
    - Firewall protection controls traffic flow either in or out of VNet subnets but distributed denial of service attacks can be subscribed to as an Azure service
  - See at the top, we have to specify a unique name, followed by which we must specify an address space in CIDR notation
    - This is something that needs to be planned ahead of time as it would be if we were creating a brand new network on-premises
    - We can also see that in the portal, we are also creating a new subnet while we are creating the VNet 
      - and the subnet IP address falls within the parent VNet range.
  - We can use Azure virtual networks then to isolate deployed Azure resources
    - A VNet, in a very loose way, is a bit like a security boundary when it comes to network transmissions
    - We can also link VNets to other VNets in Azure; this is called peering and these VNets can even be in a different Azure subscription.
  - VNets can also be used to link to an on-premises network, so you can essentially extend your on-premises network into the Azure cloud
    - You can also customize the DNS configuration for VNet. By default, it uses Azure supplied DNS for name resolution
    - Depending on the services and workloads that you're deploying in the VNet, you might need your own custom DNS name resolution.
  - You could opt to configure addresses for your own custom DNS servers instead of using Azure provided DNS
    - For resources that we deploy within Azure, we can determine whether we want them to stick with private IP addresses, 
    - That are not directly reachable, for example, from the Internet versus those that should have public IP addresses
    - You might have a public IP address assigned to a host in a subnet, so you can get into it from across the Internet.
  - From there, you might further be able to get access to other internal hosts using their internal IP addresses
    - That's really a definition of a jumpbox that IT administrators would use
    - We know that Azure virtual subnets are created within an Azure VNet, and you can have more than one subnet within the VNet.
  - Each subnet is assigned a network security group, an NSG, which is used to control in and outbound network traffic
    - Each subnet is assigned a routing table to control network traffic flow
    - You might want to modify this, for instance, if you have a firewall appoints that are deployed as a virtual machine
    - That you want all traffic to go through first to be inspected, either on its way in or on its way out of your Azure VNet.
  - The subnet IP address range, remember, must fall within the parent VNet range
    - It's important to have planned the IP addressing that will be used ahead of time. 
    - You can also go back into a subnet and change IP address ranges at any time
    - For example, if you decide you wanted to find a new subnet or a new range within a subnet
    - You can go ahead and do that, using either the Azure portal or command line tools.


Azure Virtual Network GUI Management
  - A Microsoft Azure webpage opens. It has a menu bar with a search bar and the following options: Filter, Notifications, Settings, etc. 
    - A navigation pane is present on this screen with the following options: Create a resource, Home, Dashboard, All services, and Favorites. 
  - When creating a new virtual network, or VNet, in the Azure cloud, there needs to be some upfront planning
    - This will be much like you would do if you were about to set up a new network on-premises
    - If you don't have that experience, what we are really talking about doing is first of all determining we need another network in the first place?
  - Normally, you might need that if you're going to, for example, deploy a test web application 
    - You want to keep it isolated network-wise from other resources in production
    - On-premises you might configure a switch with a new VLAN, a virtual local area network, you also have to think about things like IP address ranges
    - Here in Azure, I'm going to begin the process of creating my new virtual network by clicking Create a resource in the upper-left.
  - I could either search for what I want to create, so I might type in virtual network, and I can see virtual network shows up
    - Or I could browse through the presented categories in the GUI.
    - So if I click Networking, here's Virtual network over on the right.
    - Then go ahead and click on it.
  - There needs to b a standard naming convention we adhere to when it comes to the naming of Azure resources so name it appropriately
  - We mentioned that we should have pre-planned an IP address space that we want to use. So, for example, here I'm going to specify 10.1.0.0/16
    - This is CIDR notation, C-I-D-R, where we use the slash and the number of bits in the subnet mask.
  - Here, I'm specifying /16, so that tells us then that the first two octets, or the first two bytes, 10.1, identify the network for this VNet
    - Split that up further when we start creating subnets within this VNet
    - Tie this to my subscription, I can either create a new resource group or choose an existing one
    - Choose an existing one from the list that I've previously created, and the Location I'm going to leave as the one already chosen
  - Down below, it wants to call the Subnet default. I don't want it called that, so I'm gonna call this EastSubnet1
    - After I've done that, the next thing I want to do is specify the address range for this subnet
    - If I go off on a tangent and specify, let's say, 12.1.0.0/16
    - When I tab out of there it gives me an error and that's because this address range does not fall within the VNet address range listed up above.
  - Use 10.1, let's say, .1.0, which means this is a network address, not an address for a specific host, and then /24
    - Using a 24-bit subnet mask here for this subnet within my VNet which tells me that the first three numbers here, the first three octets
    - Are being used to identify my network. When I tab out of there, notice we get the green check mark
    - This is seen everywhere in the Azure portal, it's a good thing
    - It's telling you that what you're doing is acceptable; it's correct, when it comes to a valid name or in this case, a valid IP address range.
  - For DDoS protection leave it on Basic, there won't be changes of any of the other settings here for Service endpoints or Firewall, click Create.
  - After a moment, it will have created both the virtual network as well as the subnet
    - We have the message in the upper-right about the Deployment in progress
    - At any point in time, we can just click the little alarm bell icon for notifications in this session.
  - Click on All resources, over on the left, if I want to start to see the items that we've just created
    - For example, we can now see that we've got EastVnet1 and can see it's tied to the resource group called Rg1 and it was deployed in the best region.
    - I could click on the link for the name of that VNet to open up its Properties blade.
  - For example, I might want to add tags to assign it to a department or a project, this is where I will see subnets.
    - The subnet itself is not a standalone Azure resource like the VNet is, and shows up as such. 
    - Instead, we get to the subnets for a VNet, because it's within that in the property sheet
    - That's because it's part of the hierarchy, you can't have a subnet without a VNet.
    - We could also select our subnet from here to open up its details.
  - We can see the address range and whether it's assigned with the network security group to control network traffic. 
  - But suffice it to say that at this point we've now got one virtual network that we've deployed in the Azure Cloud.

